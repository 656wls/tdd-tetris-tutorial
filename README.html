<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>TDD Tutorial</title>
    <style type="text/css">
        .copyright {
            border-top: 1px solid #666666;
            color: #666666;
            font-size: small;
        }
    </style>
</head>
<body>

<h1>TDD Tutorial</h1>


<h2>The Steps Of The Tutorial</h2>

<p>Use the following tests to write a Tetris game. Copy them to your project one file at a time, in the same order as
    they are listed below, starting with <code>FallingBlocksTest.java</code>. First write code which passes the first
    test (<code>ANewBoard.testIsEmpty</code>) and then uncomment the following test (<code>ANewBoard.testHasNoFallingBlocks</code>).
    When that test passes, uncomment the next one (<code>WhenABlockIsDropped.testTheBlockIsFalling</code>) until finally
    you have written code which passes all tests in that class. Then copy the next test class to your project and keep
    on continuing in the same fashion.
</p>

<ol>
    <li><a href="src/test/java/tetris/FallingBlocksTest.java"><code>FallingBlocksTest.java</code></a>

        <p>In Tetris, the most important feature is that there are blocks which fall down, so that is the first
            behaviour which we will specify by writing tests. It is good to start the writing of a program with a very
            trivial test. In this case, we will first make sure that we have an empty game board.
        </p>
    </li>
    <li><a href="src/test/java/tetris/RotatingPiecesOfBlocksTest.java"><code>RotatingPiecesOfBlocksTest.java</code></a>

        <p>Rotating the pieces in Tetris is also very important, so let's code that next. You might need pen and paper
            when figuring out how the shape coordinates change when the shape is rotated.
        </p>

        <p>(I decided to go for a generic method of rotating any shapes. Another option would have been to hard-code the
            rotations of each shape. Both have their pros and cons. But even if this decision would prove to be bad when
            the game expands beyond this tutorial, good test coverage and decoupled code will make it possible to change
            it afterwards.)
        </p>
    </li>
    <li><a href="src/test/java/tetris/RotatingTetrominoesTest.java"><code>RotatingTetrominoesTest.java</code></a>

        <p><a href="http://en.wikipedia.org/wiki/Tetromino">Tetrominoes</a> can have 1, 2 or 4 different positions when
            they are rotated. Now we can take advantage of the shape rotation code which we wrote just a moment ago.
        </p>
    </li>
    <li><a href="src/test/java/tetris/FallingPiecesTest.java"><code>FallingPiecesTest.java</code></a>

        <p>Next we will connect the falling blocks and the rotatable pieces. In order to make the first test pass, you
            will probably need to refactor your code quite much (for me it took 1Â½ hours). You need to build suitable
            abstractions, so that single-block pieces and multi-block pieces can be handled the same way (changing the
            test code should not be necessary). When refactoring, you must keep the tests passing between every small
            change, or you will end up in <a href="http://c2.c2.com/cgi/wiki?RefactoringHell">refactoring hell</a>. If
            more than five minutes has passed since the last time all tests passed, revert your code to the last version
            from source control where all tests passed.
        </p>
    </li>
    <li><a href="src/test/java/tetris/MovingAFallingPieceTest.java"><code>MovingAFallingPieceTest.java</code></a>

        <p>Now it's your turn to write the tests. I've provided some TODO items which should hint you on what kind of
            tests to write.</p>
    </li>
    <li><a href="src/test/java/tetris/RotatingAFallingPieceTest.java"><code>RotatingAFallingPieceTest.java</code></a>

        <p>Keep on writing your own tests. You're getting the hang of it!</p>
    </li>
    <li>Next you should probably implement the following features in a suitable order: removing full rows, counting
        removed rows (maybe launch an even when a row is removed - <a href="http://mockito.org/">Mockito</a> might come
        in handly for testing that), counting score, choosing the next piece by random. Soon after that you should be
        able to create an user interface which is only a thin wrapper over the already implemented functionality
        (automated testing of user interfaces is generally too hard to be worth the effort).
    </li>
</ol>

<p class="copyright">Copyright (c) 2008-2009 Esko Luontola, <a href="http://www.orfjackal.net/">www.orfjackal.net</a>
    <br/>You may use and modify this material freely for personal non-commercial use. This material may NOT be used as
    course material without prior written agreement.
</p>


</body>
</html>
